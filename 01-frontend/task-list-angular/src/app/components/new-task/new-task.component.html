<div class="modal-overlay" *ngIf="isOpen" (click)="closeModal()"></div>
<div class="modal-container" *ngIf="isOpen">
  <div class="modal-header">
    <h2>{{ task.entityName ? "Edit Task" : "New Task" }}</h2>
    <label for="statusToggle">
      <input
        type="checkbox"
        id="statusToggle"
        [(ngModel)]="task.status"
        name="status"
        [ngModelOptions]="{ standalone: true }"
      />
      Open | Closed
    </label>
  </div>
  <div class="modal-content">
    <form #taskForm="ngForm" (ngSubmit)="onSubmit(taskForm)" novalidate>
      <div class="form-group">
        <label for="entityName">Entity Name</label>
        <input
          type="text"
          id="entityName"
          [(ngModel)]="task.entityName"
          name="entityName"
          required
          #entityName="ngModel"
        />
        <div *ngIf="entityName.invalid && entityName.touched" class="error">
          Entity Name is required.
        </div>
      </div>
      <div class="form-group">
        <label for="date">Date</label>
        <input
          type="date"
          id="date"
          [(ngModel)]="task.date"
          name="date"
          required
          #date="ngModel"
        />
        <div *ngIf="date.invalid && date.touched" class="error">
          Date is required.
        </div>
      </div>
      <div class="form-group">
        <label for="time">Time</label>
        <input
          type="time"
          id="time"
          [(ngModel)]="task.time"
          name="time"
          required
          #time="ngModel"
        />
        <div *ngIf="time.invalid && time.touched" class="error">
          Time is required.
        </div>
      </div>
      <div class="form-group">
        <label for="taskType">Task Type</label>
        <select
          id="taskType"
          [(ngModel)]="task.taskType"
          name="taskType"
          required
          #taskType="ngModel"
        >
          <option value="Call">Call</option>
          <option value="Meeting">Meeting</option>
          <option value="Video Call">Video Call</option>
        </select>
        <div *ngIf="taskType.invalid && taskType.touched" class="error">
          Task Type is required.
        </div>
      </div>
      <div class="form-group">
        <label for="contactPerson">Contact Person</label>
        <input
          type="text"
          id="contactPerson"
          [(ngModel)]="task.contactPerson"
          name="contactPerson"
          required
          #contactPerson="ngModel"
        />
        <div
          *ngIf="contactPerson.invalid && contactPerson.touched"
          class="error"
        >
          Contact Person is required.
        </div>
      </div>
      <div class="form-group">
        <label for="note">Note (optional)</label>
        <textarea id="note" [(ngModel)]="task.note" name="note"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" (click)="closeModal()">Cancel</button>
        <button type="submit" [disabled]="taskForm.invalid">Save</button>
      </div>
    </form>
  </div>
</div>
